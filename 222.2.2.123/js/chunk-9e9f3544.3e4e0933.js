(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e9f3544","chunk-688e6f79","chunk-04f998c9","chunk-8cb1c234","chunk-1c49fd68"],{1338:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},["darkMode"==t.mainTheme?a("img",{attrs:{src:s("d939"),width:"220px"}}):a("img",{attrs:{src:s("9279"),width:"220px"}}),a("div",{staticClass:"description"},[t._v(t._s(t.$t("xboot")))])])])},n=[],r={name:"xboot-header",computed:{mainTheme:function(){return this.$store.state.theme.theme.mainTheme}}},i=r,o=(s("811f"),s("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);e["default"]=c.exports},3988:function(t,e,s){},"46a4":function(t,e,s){},"811f":function(t,e,s){"use strict";s("46a4")},"8ab0":function(t,e,s){},"8d45":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"rect1"}),s("div",{staticClass:"rect2"}),s("div",{staticClass:"rect3"}),s("div",{staticClass:"rect4"}),s("div",{staticClass:"rect5"})])}],r={name:"rectLoading"},i=r,o=(s("958a"),s("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);e["default"]=c.exports},9477:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"relate"},[s("Row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"center",align:"middle"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkVaptcha.apply(null,arguments)}}},[s("Col",{staticClass:"content"},[s("div",[s("Header"),t.relateLoading?t._e():s("div",[s("Tabs",{attrs:{value:"1"}},[s("TabPane",{attrs:{label:t.$t("relateTitle"),name:"1",icon:"md-person-add"}},[s("Form",{ref:"relateLoginForm",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[s("FormItem",{attrs:{prop:"username"}},[s("Input",{attrs:{prefix:"ios-contact",size:"large",clearable:"",placeholder:"请输入登录账号",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",prefix:"ios-lock",size:"large",clearable:"",placeholder:"请输入密码",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1),s("Row",[s("Button",{attrs:{type:"primary",size:"large",loading:t.loading,long:""},on:{click:t.checkVaptcha}},[t.loading?s("span",[t._v(t._s(t.$t("relating")))]):s("span",[t._v(t._s(t.$t("relate")))])])],1),s("Row",{staticClass:"other-thing",attrs:{type:"flex",justify:"space-between"}},[s("router-link",{staticClass:"back",attrs:{to:"/reset"}},[t._v(t._s(t.$t("forgetPass")))]),s("router-link",{staticClass:"back",attrs:{to:"/regist"}},[t._v(" "+t._s(t.$t("registerNow"))+" ")])],1)],1),t.relateLoading?s("div",[s("RectLoading")],1):t._e()],1),s("Footer")],1),s("LangSwitch")],1)],1)},n=[],r=s("be65"),i=s.n(r),o=s("365c"),c=s("c276"),l=s("1338"),u=s("c9d5"),f=s("ab7e"),d=s("8d45"),h={components:{LangSwitch:f["default"],Header:l["default"],Footer:u["default"],RectLoading:d["default"]},data:function(){return{relateLoading:!0,loadingVaptcha:!0,loading:!1,verified:!1,form:{isLogin:!1,username:"",password:"",socialType:null,id:"",token:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}]},vaptchaObject:null}},methods:{submitRelate:function(){var t=this;this.form.id?this.$refs.relateLoginForm.validate((function(e){e&&(t.loading=!0,t.form.isLogin=!1,Object(o["Ub"])(t.form).then((function(e){e.success?Object(o["mb"])({JWTKey:e.result}).then((function(e){if(e.success){t.$Message.success("绑定成功");var s=e.result;t.setStore("accessToken",s),Object(o["vb"])().then((function(t){if(t.result){var e=t.result.ssoDomain;i.a.set("accessToken",s,{domain:e,expires:7})}})),Object(o["sc"])().then((function(e){if(e.success){delete e.result.permissions;var s=[];e.result.roles.forEach((function(t){s.push(t.name)})),delete e.result.roles,t.setStore("roles",s),i.a.set("userInfo",JSON.stringify(e.result),{expires:7}),t.setStore("userInfo",e.result),t.$store.commit("setUserInfo",e.result),c["a"].initRouter(t),t.$router.push({name:"home_index"})}else t.loading=!1}))}else t.loading=!1})):(t.loading=!1,t.vaptchaObject.reset())})))})):this.$Message.error("参数非法")},relateDirect:function(){var t=this;this.form.isLogin=!0,Object(o["Ub"])(this.form).then((function(e){e.success&&t.$Message.success("绑定成功"),t.$router.push({name:"ownspace_index",query:{type:"social"}})}))},initVaptcha:function(){var t=this;vaptcha({vid:o["uc"],type:"invisible",offline_server:o["vc"]}).then((function(e){t.vaptchaObject=e;var s=i.a.get("userInfo");s&&t.vaptchaObject.validate(),e.listen("pass",(function(){t.form.token=e.getToken(),s?t.relateDirect():t.submitRelate()}))}))},checkVaptcha:function(){var t=this;this.$refs.relateLoginForm.validate((function(e){e&&t.vaptchaObject.validate()}))}},mounted:function(){var t=this.$route.query;this.form.socialType=t.socialType,this.form.id=t.id,this.initVaptcha();var e=i.a.get("userInfo");e||(this.relateLoading=!1)}},m=h,p=(s("d38e"),s("2877")),g=Object(p["a"])(m,a,n,!1,null,null,null);e["default"]=g.exports},"958a":function(t,e,s){"use strict";s("e699")},ab7e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lang-icon"},[a("Dropdown",{attrs:{transfer:""},on:{"on-click":t.langChange}},[a("Icon",{attrs:{type:"md-globe",size:"26"}}),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"zh-CN",selected:"zh-CN"==t.currLang}},[a("div",{staticClass:"lan-logo-content"},[a("img",{staticClass:"country-logo",attrs:{src:s("6336")}}),t._v("简体中文 ")])]),a("DropdownItem",{attrs:{name:"en-US",selected:"en-US"==t.currLang}},[a("div",{staticClass:"lan-logo-content"},[a("img",{staticClass:"country-logo",attrs:{src:s("38f6")}}),t._v("English ")])])],1)],1)],1)},n=[],r={name:"langSwitch",data:function(){return{currLang:"zh-CN"}},methods:{langChange:function(t){this.currLang=t,this.$i18n.locale=t,this.$store.commit("switchLang",t)}},mounted:function(){localStorage.lang&&(this.currLang=localStorage.lang)}},i=r,o=(s("fac3"),s("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);e["default"]=c.exports},c9d5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"foot"},[s("Row",{staticClass:"foot-item",attrs:{type:"flex",justify:"space-around"}},[s("a",{staticClass:"item",attrs:{href:"https://www.kancloud.cn/zwz/xboot/1009234",target:"_blank"}},[t._v(t._s(t.$t("docs")))]),s("a",{staticClass:"item",attrs:{href:"https://github.com/zwz/x-boot",target:"_blank"}},[s("Icon",{attrs:{custom:"iconfont icon-github",size:"16"}})],1),s("a",{staticClass:"item",attrs:{href:"http://xpay.zwz.cn/pay?xboot",target:"_blank"}},[t._v(t._s(t.$t("fullVersion")))])]),s("Row",{staticClass:"copyright",attrs:{type:"flex",justify:"center"}},[t._v(" Copyright © 2018 - Present "),s("a",{staticStyle:{margin:"0 5px"},attrs:{href:"http://zwz.cn",target:"_blank"}},[t._v("zwz")]),t._v(" "+t._s(t.$t("rights"))+" ")])],1)},n=[],r={name:"xboot-footer"},i=r,o=(s("e400"),s("2877")),c=Object(o["a"])(i,a,n,!1,null,null,null);e["default"]=c.exports},d38e:function(t,e,s){"use strict";s("ff3e")},e400:function(t,e,s){"use strict";s("3988")},e699:function(t,e,s){},fac3:function(t,e,s){"use strict";s("8ab0")},ff3e:function(t,e,s){}}]);