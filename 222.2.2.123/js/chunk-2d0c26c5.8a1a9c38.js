(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c26c5"],{"49f0":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticStyle:{display:"flex",position:"relative"}},[t("Form",{ref:"smsForm",attrs:{model:e.sms,"label-width":110,"label-position":"left",rules:e.smsValidate}},[t("FormItem",{attrs:{label:"服务提供商",prop:"serviceName"}},[t("Select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择"},on:{"on-change":e.changeSms},model:{value:e.sms.serviceName,callback:function(s){e.$set(e.sms,"serviceName",s)},expression:"sms.serviceName"}},[t("Option",{attrs:{value:"ALI_SMS"}},[e._v("阿里云")]),t("Option",{attrs:{value:"TENCENT_SMS"}},[e._v("腾讯云")])],1)],1),t("FormItem",{attrs:{label:"accessKey",prop:"accessKey"}},[t("Input",{staticStyle:{width:"380px"},attrs:{type:"text",placeholder:"请输入accessKey/secretId",disabled:e.changeLoading},model:{value:e.sms.accessKey,callback:function(s){e.$set(e.sms,"accessKey",s)},expression:"sms.accessKey"}})],1),t("FormItem",{attrs:{label:"secretKey",prop:"secretKey"}},[t("Tooltip",{attrs:{placement:"right",content:"无法编辑时请先点击查看图标"}},[t("Input",{staticClass:"input-see",staticStyle:{width:"380px"},attrs:{type:"text",readonly:!e.changedSmsSK,disabled:e.changeLoading,icon:"ios-eye",placeholder:"请输入secretKey"},on:{"on-click":function(s){return e.seeSecret(e.sms.serviceName)}},model:{value:e.sms.secretKey,callback:function(s){e.$set(e.sms,"secretKey",s)},expression:"sms.secretKey"}})],1)],1),"TENCENT_SMS"==e.sms.serviceName?t("FormItem",{attrs:{label:"应用ID",prop:"appId"}},[t("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入应用ID（短信控制台-应用管理）"},model:{value:e.sms.appId,callback:function(s){e.$set(e.sms,"appId",s)},expression:"sms.appId"}})],1):e._e(),t("FormItem",{attrs:{label:"短信签名",prop:"signName"}},[t("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入短信签名"},model:{value:e.sms.signName,callback:function(s){e.$set(e.sms,"signName",s)},expression:"sms.signName"}})],1),t("FormItem",{attrs:{label:"使用场景",prop:"type"}},[t("Select",{staticStyle:{width:"380px"},attrs:{disabled:e.changeLoading,placeholder:"请选择",transfer:""},on:{"on-change":e.changeSmsType},model:{value:e.sms.type,callback:function(s){e.$set(e.sms,"type",s)},expression:"sms.type"}},[t("Option",{attrs:{value:"0"}},[e._v("通用验证码")]),t("Option",{attrs:{value:"1"}},[e._v("注册")]),t("Option",{attrs:{value:"2"}},[e._v("登录")]),t("Option",{attrs:{value:"3"}},[e._v("修改绑定手机号")]),t("Option",{attrs:{value:"4"}},[e._v("修改密码")]),t("Option",{attrs:{value:"5"}},[e._v("重置密码")]),t("Option",{attrs:{value:"6"}},[e._v("工作流消息")])],1)],1),t("FormItem",{attrs:{label:"模版CODE/ID",prop:"templateCode"}},[t("Input",{staticStyle:{width:"380px"},attrs:{type:"text",disabled:e.changeLoading,placeholder:"请输入场景对应短信模版CODE/ID，如SMS_123456789"},model:{value:e.sms.templateCode,callback:function(s){e.$set(e.sms,"templateCode",s)},expression:"sms.templateCode"}})],1),t("FormItem",[t("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",disabled:e.changeLoading,loading:e.saveLoading},on:{click:e.saveEditSms}},[e._v("保存更改")])],1)],1),e.loading?t("Spin",{attrs:{fix:""}}):e._e()],1)},n=[],i=t("365c"),c={name:"sms",data:function(){return{loading:!1,changeLoading:!1,saveLoading:!1,sms:{serviceName:"ALI_SMS",accessKey:"",secretKey:"",appId:"",signName:"",type:"",templateCode:""},changedSmsSK:!1,smsValidate:{serviceName:[{required:!0,message:"请选择",trigger:"change"}],accessKey:[{required:!0,message:"不能为空",trigger:"change"}],secretKey:[{required:!0,message:"不能为空",trigger:"change"}],appId:[{required:!0,message:"不能为空",trigger:"change"}],signName:[{required:!0,message:"不能为空",trigger:"change"}],type:[{required:!0,message:"不能为空",trigger:"change"}],templateCode:[{required:!0,message:"不能为空",trigger:"blur"}]}}},methods:{init:function(){this.initSmsSet()},initSmsSet:function(){var e=this;this.loading=!0,Object(i["n"])().then((function(s){if(s.success&&s.result){var t=s.result;Object(i["Eb"])(t).then((function(s){if(e.loading=!1,s.result){for(var t in s.result)null==s.result[t]&&(s.result[t]="");e.sms=s.result,e.sms.type="0",e.changeSmsType(e.sms.type)}else e.changedSmsSK=!0}))}else e.loading=!1,e.changedSmsSK=!0}))},changeSms:function(e){var s=this;this.changeLoading=!0,Object(i["Eb"])(e).then((function(t){if(s.changeLoading=!1,t.result){for(var a in t.result)null==t.result[a]&&(t.result[a]="");s.sms=t.result,s.changedSmsSK=!1,s.sms.type="0",s.changeSmsType(s.sms.type)}else s.sms={serviceName:e},s.sms.type="0",s.changedSmsSK=!0}))},seeSecret:function(e){var s=this;e&&Object(i["gc"])(e).then((function(e){e.success&&(s.sms.secretKey=e.result,s.changedSmsSK=!0)}))},changeSmsType:function(e){var s=this;Object(i["Fb"])(this.sms.serviceName,e).then((function(e){e.success&&(s.sms.templateCode=e.result)}))},saveEditSms:function(){var e=this;this.$refs.smsForm.validate((function(s){s&&(e.saveLoading=!0,e.sms.changed=e.changedSmsSK,Object(i["W"])(e.sms).then((function(s){e.saveLoading=!1,s.success&&e.$Message.success("保存成功")})))}))}},mounted:function(){this.init()}},r=c,l=t("2877"),o=Object(l["a"])(r,a,n,!1,null,null,null);s["default"]=o.exports}}]);