(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-673f9d4e","chunk-70ff73b8","chunk-2d0d7882"],{"0808":function(t,e,i){},"76e2":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Select",{attrs:{size:t.size,loading:t.loading,placeholder:t.placeholder,multiple:t.multiple,disabled:t.disabled,filterable:t.filterable,transfer:t.transfer,clearable:t.clearable,placement:t.placement,"transfer-class-name":t.transferClassName,prefix:t.prefix,"max-tag-count":t.maxTagCount,"max-tag-placeholder":t.maxTagPlaceholder},on:{"on-change":t.handleChange,"on-query-change":t.handleQueryChange,"on-clear":t.handleClear,"on-open-change":t.handleOpenChange,"on-select":t.handleSelect},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},t._l(t.dictData,(function(e,a){return i("Option",{key:a,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1)},n=[],s=i("365c"),r={name:"dict",props:{value:"",dict:String,placeholder:{type:String,default:"请选择"},placement:{type:String,default:"bottom-start"},size:String,multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},transfer:{type:Boolean,default:!1},transferClassName:String,prefix:String,maxTagCount:Number,maxTagPlaceholder:Function,clearable:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,dictData:[],loading:!1}},methods:{getData:function(t){var e=this;this.loading=!0,Object(s["ib"])(t).then((function(t){e.loading=!1,t.success&&(e.dictData=t.result)}))},handleChange:function(t){this.$emit("input",t),this.$emit("on-change",t)},handleQueryChange:function(t){this.$emit("on-query-change",t)},handleClear:function(){this.$emit("on-clear","")},handleOpenChange:function(t){this.$emit("on-open-change",t)},handleSelect:function(t){this.$emit("on-select",t)},setCurrentValue:function(t){t!==this.currentValue&&(this.currentValue=t,this.$emit("on-change",this.currentValue))}},watch:{value:function(t){this.setCurrentValue(t)},dict:function(t){this.getData(t)}},mounted:function(){this.getData(this.dict)}},o=r,l=i("2877"),u=Object(l["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports},9240:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Form",{ref:"form",attrs:{model:t.form,"label-width":90,"label-position":"left"}},[i("FormItem",{attrs:{label:"登录账号：",prop:"username"}},[t._v(t._s(t.form.username))]),i("FormItem",{attrs:{label:"用户头像："}},[i("upload-pic-thumb",{attrs:{multiple:!1},model:{value:t.form.avatar,callback:function(e){t.$set(t.form,"avatar",e)},expression:"form.avatar"}})],1),i("FormItem",{attrs:{label:"用户名：",prop:"nickname",error:t.error}},[i("Input",{staticStyle:{width:"300px"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),i("FormItem",{attrs:{label:"性别："}},[i("dict",{staticStyle:{width:"300px"},attrs:{dict:"sex"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}})],1),i("FormItem",{attrs:{label:"生日："}},[i("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date"},on:{"on-change":t.changeBirth},model:{value:t.form.birth,callback:function(e){t.$set(t.form,"birth",e)},expression:"form.birth"}})],1),i("FormItem",{attrs:{label:"所在省市："}},[i("al-cascader",{staticStyle:{width:"300px"},attrs:{"data-type":"name",level:"2"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),i("FormItem",{attrs:{label:"街道地址：",prop:"street"}},[i("Input",{staticStyle:{width:"300px"},model:{value:t.form.street,callback:function(e){t.$set(t.form,"street",e)},expression:"form.street"}})],1),i("FormItem",{attrs:{label:"个人简介：",prop:"description"}},[i("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"个人简介"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("FormItem",{attrs:{label:"所属部门："}},[i("span",[t._v(t._s(t.form.departmentTitle))])]),i("FormItem",{attrs:{label:"用户类型："}},[i("span",[t._v(t._s(t.form.typeTxt))])]),i("FormItem",[i("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:t.loading},on:{click:t.saveEdit}},[t._v("保存")])],1)],1)],1)},n=[],s=i("365c"),r=i("d014"),o=i("be65"),l=i.n(o),u=i("76e2");function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var h={components:{uploadPicThumb:r["default"],dict:u["default"]},name:"user",data:function(){return{loading:!1,form:{address:[]},error:""}},methods:{init:function(){var t=JSON.parse(l.a.get("userInfo"));for(var e in t)null==t[e]&&(t[e]="");var i=JSON.stringify(t),a=JSON.parse(i);this.form=a,a.address?"string"==typeof a.address?this.form.address=a.address.split(","):this.form.address=a.address:this.form.address=[],0==this.form.type?this.form.typeTxt="普通用户":1==this.form.type&&(this.form.typeTxt="管理员")},changeBirth:function(t){this.form.birth=t},saveEdit:function(){var t=this;this.form.nickname?(this.error="",this.loading=!0,"object"==c(this.form.birth)&&(this.form.birth=this.format(this.form.birth,"yyyy-MM-dd")),delete this.form.roles,Object(s["tc"])(this.form).then((function(e){t.loading=!1,e.success&&(t.$Message.success("保存成功"),t.$store.commit("setNickname",t.form.nickname),t.$store.commit("setAvatar",t.form.avatar),t.$emit("on-success",!0))}))):this.error="请输入用户名"}},mounted:function(){this.init()}},d=h,m=i("2877"),p=Object(m["a"])(d,a,n,!1,null,null,null);e["default"]=p.exports},d014:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-thumb"},[i("vuedraggable",{staticClass:"list-group",attrs:{list:t.uploadList,disabled:!t.draggable||!t.multiple,animation:200,"ghost-class":"thumb-ghost"},on:{end:t.onEnd}},t._l(t.uploadList,(function(e,a){return i("div",{key:a,staticClass:"upload-list",style:{width:"calc("+t.width+" + 2px)",height:"calc("+t.height+" + 2px)",lineHeight:t.height}},["finished"==e.status?i("div",[i("img",{style:{height:t.height},attrs:{src:e.url}}),i("div",{staticClass:"upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(i){return t.handleView(e.url,a)}}}),i("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],attrs:{type:"ios-trash-outline"},on:{click:function(i){return t.handleRemove(e)}}})],1)]):i("div",[e.showProgress?i("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)])})),0),i("Upload",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"upload",staticClass:"upload-btn",style:{width:t.width},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:t.format,accept:t.accept,"max-size":1024*t.maxSize,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[i("div",{staticClass:"upload-camera",style:{width:t.width,height:t.height,lineHeight:t.height}},[i("Icon",{attrs:{type:"md-camera",size:"20"}})],1)])],1)},n=[],s=(i("0808"),i("6a37")),r=i.n(s),o=i("365c"),l=i("289a"),u=i.n(l);function c(t){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var h={name:"uploadPicThumb",components:{vuedraggable:u.a},props:{value:{type:null},preview:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:5},limit:{type:Number,default:10},width:{type:String,default:"60px"},height:{type:String,default:"60px"},accept:{type:String,default:".jpg, .jpeg, .png, .gif"}},computed:{format:function(){if(this.accept){var t=[];return this.accept.split(",").forEach((function(e){t.push(e.replace(".","").replace(" ",""))})),t}return[]}},data:function(){return{accessToken:{},uploadFileUrl:o["rc"],uploadList:[]}},methods:{onEnd:function(){this.returnValue()},init:function(){this.setData(this.value),this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(t,e){var i=new Image;i.src=t;var a=new r.a(i,{hidden:function(){a.destroy()}});a.show()},handleRemove:function(t){var e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess:function(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError:function(t,e,i){this.$Message.error(t.toString())},handleFormatError:function(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 "+this.accept+" 图片格式文件"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 "+this.maxSize+"M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue:function(){if(!this.uploadList||this.uploadList.length<1)this.multiple?(this.$emit("input",[]),this.$emit("on-change",[])):(this.$emit("input",""),this.$emit("on-change",""));else if(this.multiple){var t=[];this.uploadList.forEach((function(e){t.push(e.url)})),this.$emit("input",t),this.$emit("on-change",t)}else{var e=this.uploadList[0].url;this.$emit("input",e),this.$emit("on-change",e)}},setData:function(t){var e=this;if("string"==typeof t){if(this.multiple)return void this.$Message.warning("多张上传仅支持传入数组数据类型");if(!t)return;this.uploadList=[];var i={url:t,status:"finished"};this.uploadList.push(i),this.$emit("on-change",t)}else if("object"==c(t)){if(!this.multiple)return void this.$Message.warning("单张上传仅支持传入字符串数据类型");if(this.uploadList=[],t.length>this.limit){for(var a=0;a<this.limit;a++)this.uploadList.push({url:t[a],status:"finished"});this.$emit("on-change",t.slice(0,this.limit)),this.$emit("input",t.slice(0,this.limit)),this.$Message.warning("最多只能上传"+this.limit+"张图片")}else t.forEach((function(t){var i={url:t,status:"finished"};e.uploadList.push(i)})),this.$emit("on-change",t)}}},watch:{value:function(t){this.setData(t)}},mounted:function(){this.init()}},d=h,m=(i("faba"),i("2877")),p=Object(m["a"])(d,a,n,!1,null,null,null);e["default"]=p.exports},dd11:function(t,e,i){},faba:function(t,e,i){"use strict";i("dd11")}}]);