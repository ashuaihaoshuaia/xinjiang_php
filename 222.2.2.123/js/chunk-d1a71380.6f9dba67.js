(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1a71380"],{4640:function(t,e,a){"use strict";a("bac0")},b009:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("Card",[a("Row",{staticClass:"operation"},[a("span",[t._v("组件英文名：")]),a("Tooltip",{attrs:{content:"生成的请求api文件中将使用该组件名拼接，建议驼峰法命名",placement:"right",transfer:"","max-width":"250"}},[a("Input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:""},model:{value:t.vueName,callback:function(e){t.vueName=e},expression:"vueName"}})],1),a("span",[t._v("表单显示：")]),a("Select",{staticStyle:{width:"150px","margin-right":"10px"},model:{value:t.rowNum,callback:function(e){t.rowNum=e},expression:"rowNum"}},[a("Option",{attrs:{value:"1"}},[t._v("一行一列")]),a("Option",{attrs:{value:"2"}},[t._v("一行两列")]),a("Option",{attrs:{value:"3"}},[t._v("一行三列")]),a("Option",{attrs:{value:"4"}},[t._v("一行四列")])],1),a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加字段")]),a("Button",{attrs:{type:"warning",icon:"ios-construct"},on:{click:function(e){t.entityModal=!0}}},[t._v("读取字段")]),a("Button",{attrs:{loading:t.loading,type:"success",icon:"md-send"},on:{click:t.generate}},[t._v("生成代码")]),a("Button",{attrs:{icon:"md-trash"},on:{click:t.clear}},[t._v("清空全部")])],1),a("Row",[a("Alert",{attrs:{"show-icon":""}},[t._v(" 将生成的代码复制粘贴至前端新建的空白组件中，再做少许修改并自行调通接口即可 "),a("span",{staticClass:"preview",on:{click:t.preview}},[t._v("树形结构预览")]),t._v(" 【字段 title、parentId、sortOrder、parentTitle 将自动生成，无需填入】 ")])],1),a("Row",[a("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"field",fn:function(e){var i=e.row;return[a("Input",{on:{"on-blur":function(e){return t.changeField(i,e)}},model:{value:i.field,callback:function(e){t.$set(i,"field",e)},expression:"row.field"}})]}},{key:"name",fn:function(e){var i=e.row;return[a("Input",{on:{"on-blur":function(e){return t.changeName(i,e)}},model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"row.name"}})]}},{key:"editable",fn:function(e){var i=e.row;return[a("i-switch",{on:{"on-change":function(e){return t.changeEditable(i,e)}},model:{value:i.editable,callback:function(e){t.$set(i,"editable",e)},expression:"row.editable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])]}},{key:"type",fn:function(e){var i=e.row;return[a("Select",{attrs:{disabled:!i.editable,transfer:""},on:{"on-change":function(e){return t.changeType(i,e)}},model:{value:i.type,callback:function(e){t.$set(i,"type",e)},expression:"row.type"}},[a("Option",{attrs:{value:"text"}},[t._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[t._v("选择下拉框")]),a("Option",{attrs:{value:"number"}},[t._v("数字输入框")]),a("Option",{attrs:{value:"date"}},[t._v("日期选择器")]),a("Option",{attrs:{value:"daterange"}},[t._v("日期范围选择器")]),a("Option",{attrs:{value:"upload"}},[t._v("图片上传输入组件")]),a("Option",{attrs:{value:"uploadThumb"}},[t._v("图片上传缩略图组件")]),a("Option",{attrs:{value:"switch"}},[t._v("Switch开关")]),a("Option",{attrs:{value:"radio"}},[t._v("Radio单选框")]),a("Option",{attrs:{value:"time"}},[t._v("时间选择器")]),a("Option",{attrs:{value:"area"}},[t._v("省市县级联")]),a("Option",{attrs:{value:"slider"}},[t._v("Slider滑块")]),a("Option",{attrs:{value:"quill"}},[t._v("富文本组件Quill")]),a("Option",{attrs:{value:"wangEditor"}},[t._v("富文本组件wangEditor")]),a("Option",{attrs:{value:"password"}},[t._v("密码强度提示输入组件")])],1)]}},{key:"validate",fn:function(e){var i=e.row;return[a("i-switch",{attrs:{disabled:!i.editable},on:{"on-change":function(e){return t.changeValidate(i,e)}},model:{value:i.validate,callback:function(e){t.$set(i,"validate",e)},expression:"row.validate"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])]}},{key:"action",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small"},on:{click:function(e){return t.edit(i)}}},[t._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(i)}}},[t._v("删除")])]}}])})],1)],1),a("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"form",attrs:{model:t.form,"label-width":100,rules:t.formValidate}},[a("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[a("InputNumber",{model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1),a("FormItem",{staticClass:"block-tool",attrs:{label:"字段英文名",prop:"field"}},[a("Tooltip",{attrs:{placement:"right",content:"与后端实体字段匹配"}},[a("Input",{model:{value:t.form.field,callback:function(e){t.$set(t.form,"field",e)},expression:"form.field"}})],1)],1),a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("FormItem",{attrs:{label:"可添加编辑",prop:"editable"}},[a("i-switch",{model:{value:t.form.editable,callback:function(e){t.$set(t.form,"editable",e)},expression:"form.editable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.form.editable,expression:"form.editable"}],attrs:{label:"字段表单类型",prop:"type"}},[a("Select",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("Option",{attrs:{value:"text"}},[t._v("文本输入框")]),a("Option",{attrs:{value:"select"}},[t._v("选择下拉框")]),a("Option",{attrs:{value:"number"}},[t._v("数字输入框")]),a("Option",{attrs:{value:"date"}},[t._v("日期选择器")]),a("Option",{attrs:{value:"daterange"}},[t._v("日期范围选择器")]),a("Option",{attrs:{value:"upload"}},[t._v("图片上传输入组件")]),a("Option",{attrs:{value:"uploadThumb"}},[t._v("图片上传缩略图组件")]),a("Option",{attrs:{value:"switch"}},[t._v("Switch开关")]),a("Option",{attrs:{value:"radio"}},[t._v("Radio单选框")]),a("Option",{attrs:{value:"time"}},[t._v("时间选择器")]),a("Option",{attrs:{value:"area"}},[t._v("省市县级联")]),a("Option",{attrs:{value:"slider"}},[t._v("Slider滑块")]),a("Option",{attrs:{value:"quill"}},[t._v("富文本组件Quill")]),a("Option",{attrs:{value:"wangEditor"}},[t._v("富文本组件wangEditor")]),a("Option",{attrs:{value:"password"}},[t._v("密码强度提示输入组件")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"area"==t.form.type,expression:"form.type=='area'"}],attrs:{label:"显示级别",prop:"level"}},[a("Select",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[a("Option",{attrs:{value:"0"}},[t._v("仅显示省")]),a("Option",{attrs:{value:"1"}},[t._v("显示省和县")]),a("Option",{attrs:{value:"2"}},[t._v("显示省市县")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.form.editable,expression:"form.editable"}],attrs:{label:"表单非空验证",prop:"validate"}},[a("i-switch",{model:{value:t.form.validate,callback:function(e){t.$set(t.form,"validate",e)},expression:"form.validate"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1),a("Modal",{attrs:{title:"生成代码",width:900,fullscreen:t.full,styles:t.full?{}:t.modalStyle},model:{value:t.codeModal,callback:function(e){t.codeModal=e},expression:"codeModal"}},[a("RadioGroup",{staticStyle:{"margin-bottom":"15px"},on:{"on-change":t.changeRadio},model:{value:t.resultType,callback:function(e){t.resultType=e},expression:"resultType"}},[a("Radio",{attrs:{label:"resultApi",border:""}},[t._v("树结构(含API)")]),a("Radio",{attrs:{label:"result",border:""}},[t._v("树结构(模拟请求)")])],1),a("Tabs",{attrs:{type:"card"},on:{"on-click":t.changeCode},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[a("TabPane",{attrs:{name:"index.vue",label:"index.vue"}}),"resultApi"==t.resultType?a("TabPane",{attrs:{name:"api.js",label:"api.js"}}):t._e()],1),t.full?t._e():a("Input",{staticStyle:{"max-height":"60vh",overflow:"auto"},attrs:{type:"textarea",autosize:""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t.full?a("Input",{attrs:{rows:32,type:"textarea"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{icon:"md-expand"},on:{click:function(e){t.full=!t.full}}},[t._v("全屏开/关")]),a("Button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.code,expression:"code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"primary",icon:"md-copy"}},[t._v("复制代码")])],1)],1),a("Modal",{attrs:{title:"自动读取字段",width:700,fullscreen:t.fullEntity},model:{value:t.entityModal,callback:function(e){t.entityModal=e},expression:"entityModal"}},[a("Alert",{attrs:{"show-icon":""}},[t._v("输入实体类的引用路径，将自动读取其字段生成所需JSON配置数据，免去手动配置添加字段")]),a("Form",{ref:"entityForm",attrs:{model:t.entityForm,"label-width":130,rules:t.entityFormValidate}},[a("FormItem",{attrs:{label:"实体类引用路径",prop:"path"}},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Input",{staticStyle:{width:"410px"},attrs:{placeholder:"例如：cn.exrick.xboot.modules.base.entity.User",clearable:""},model:{value:t.entityForm.path,callback:function(e){t.$set(t.entityForm,"path",e)},expression:"entityForm.path"}}),a("Button",{attrs:{type:"warning",icon:"md-play"},on:{click:t.generateEntityData}},[t._v("读取字段")])],1)],1)],1),t.fullEntity?t._e():a("Input",{staticStyle:{"max-height":"50vh",overflow:"auto"},attrs:{type:"textarea",autosize:"",placeholder:"生成结果"},model:{value:t.entityData,callback:function(e){t.entityData=e},expression:"entityData"}}),t.fullEntity?a("Input",{attrs:{rows:32,type:"textarea"},model:{value:t.entityData,callback:function(e){t.entityData=e},expression:"entityData"}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{icon:"md-expand"},on:{click:function(e){t.fullEntity=!t.fullEntity}}},[t._v("全屏开/关")]),a("Button",{attrs:{type:"primary",icon:"md-checkmark-circle-outline"},on:{click:t.submitEntityData}},[t._v("确认更新字段值")])],1)],1)],1)},o=[],r=a("365c"),n={name:"tree-generator",data:function(){return{resultType:"resultApi",tabName:"index.vue",modalStyle:{top:"30px"},result:{},entityModal:!1,fullEntity:!1,entityData:"",entityForm:{path:""},loading:!1,code:"",vueName:"",rowNum:"1",full:!1,codeModal:!1,modalVisible:!1,modalType:0,modalTitle:"",form:{sortOrder:0,field:"",name:"",level:"2",editable:!0,type:"text",validate:!0},formValidate:{field:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}]},entityFormValidate:{path:[{required:!0,message:"不能为空",trigger:"blur"}]},columns:[{title:"排序",key:"sortOrder",sortType:"asc",sortable:!0,align:"center",minWidth:80},{title:"字段英文名",slot:"field",minWidth:150},{title:"名称",slot:"name",minWidth:150},{title:"可添加编辑",slot:"editable",minWidth:100},{title:"表单类型",slot:"type",minWidth:200},{title:"表单非空验证",slot:"validate",minWidth:110},{title:"操作",slot:"action",align:"center",minWidth:130}],data:[]}},methods:{init:function(){var t=this.getStore("treeData"),e=this.getStore("treeVueName");this.getStore("treeRowNum");t&&"undefined"!=t&&(this.data=JSON.parse(t)),e&&"undefined"!=e&&(this.vueName=e)},generateEntityData:function(){var t=this;this.$refs.entityForm.validate((function(e){e&&Object(r["kb"])(t.entityForm.path).then((function(e){e.success&&(t.entityData=e.result)}))}))},submitEntityData:function(){if(this.entityData)try{var t=JSON.parse(this.entityData);this.data=t.data,this.entityModal=!1}catch(e){this.$Message.error("请确保JSON数据格式正确")}else this.$Message.warning("请先输入实体类引用路径生成JSON数据")},preview:function(){this.$router.push({name:"tree"})},changeField:function(t,e){for(var a in t)null==t[a]&&(t[a]="");var i=JSON.stringify(t),o=JSON.parse(i);o.field=e.target.value,this.data.splice(t._index,1,o),this.save()},changeName:function(t,e){for(var a in t)null==t[a]&&(t[a]="");var i=JSON.stringify(t),o=JSON.parse(i);o.name=e.target.value,this.data.splice(t._index,1,o),this.save()},changeType:function(t,e){for(var a in t)null==t[a]&&(t[a]="");var i=JSON.stringify(t),o=JSON.parse(i);o.type=e,this.data.splice(t._index,1,o),this.save()},changeEditable:function(t,e){for(var a in t)null==t[a]&&(t[a]="");var i=JSON.stringify(t),o=JSON.parse(i);o.editable=e,this.data.splice(t._index,1,o),this.save()},changeValidate:function(t,e){for(var a in t)null==t[a]&&(t[a]="");var i=JSON.stringify(t),o=JSON.parse(i);o.validate=e,this.data.splice(t._index,1,o),this.save()},handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if("wangEditor"==t.form.type||"quill"==t.form.type){var a=!1;if(t.data.forEach((function(t){"wangEditor"!=t.type&&"quill"!=t.type||(a=!0)})),a)return void t.$Message.warning("已添加了富文本组件，暂仅支持添加1个")}var i=t.form;for(var o in i)null==i[o]&&(i[o]="");var r=JSON.stringify(i),n=JSON.parse(r);0==t.modalType?(t.data.push(n),t.data=t.data):t.data.splice(i._index,1,n),t.save(),t.modalVisible=!1}}))},add:function(){this.modalType=0,this.modalTitle="添加字段",this.$refs.form.resetFields(),this.modalVisible=!0},edit:function(t){for(var e in this.modalType=1,this.modalTitle="编辑字段",t)null==t[e]&&(t[e]="");var a=JSON.stringify(t),i=JSON.parse(a);this.form=i,this.modalVisible=!0},remove:function(t){this.data.splice(t._index,1),this.save(),this.$Message.success("操作成功")},clear:function(){var t=this;this.$Modal.confirm({title:"确认清空",content:"您确认要清空所有数据 ?",onOk:function(){t.data=[],t.vueName="",t.rowNum="1",t.save(),t.$Message.success("操作成功")}})},generate:function(){var t=this;if(this.vueName){this.loading=!0;var e=0;if(this.data.forEach((function(t){"wangEditor"!=t.type&&"quill"!=t.type||e++})),e>1)this.$Message.warning("暂仅支持添加1种类别富文本组件，请勿添加多个");else{var a=!1;this.data.forEach((function(t){"title"!=t.field&&"parentId"!=t.field&&"sortOrder"!=t.field&&"parentTitle"!=t.field||(a=!0)})),a?(this.loading=!1,this.$Modal.confirm({title:"无效字段提示",content:"您添加的字段中包含以下无效的重复字段：title、parentId、sortOrder、parentTitle，确认后将自动过滤生成?",onOk:function(){t.loading=!0,t.data=t.data.filter((function(t){return"title"!=t.field&&"parentId"!=t.field&&"sortOrder"!=t.field&&"parentTitle"!=t.field})),Object(r["cb"])(t.vueName,t.rowNum,t.data).then((function(e){t.loading=!1,e.success&&(t.result=e.result,t.changeCode(),t.codeModal=!0,t.save())}))}})):Object(r["cb"])(this.vueName,this.rowNum,this.data).then((function(e){t.loading=!1,e.success&&(t.result=e.result,t.changeCode(),t.codeModal=!0,t.save())}))}}else this.$Message.warning("请输入组件名")},changeRadio:function(){this.tabName="index.vue",this.changeCode()},changeCode:function(){"resultApi"==this.resultType&&("index.vue"==this.tabName&&(this.code=this.result.resultApi),"api.js"==this.tabName&&(this.code=this.result.api)),"result"==this.resultType&&(this.code=this.result.result)},onCopy:function(){this.$Message.success("复制成功")},onError:function(){this.$Message.warning("复制失败，请手动复制")},save:function(){this.setStore("treeData",JSON.stringify(this.data)),this.setStore("treeVueName",this.vueName),this.setStore("treeRowNum",this.rowNum)}},mounted:function(){this.init()}},l=n,s=(a("4640"),a("2877")),c=Object(s["a"])(l,i,o,!1,null,null,null);e["default"]=c.exports},bac0:function(t,e,a){}}]);