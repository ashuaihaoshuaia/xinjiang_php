(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-621a94fc","chunk-185e349b","chunk-2d0ceda3"],{"0195":function(t,e,i){},"10fd":function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return n}));var s=function(t,e,i){var s=/^[a-zA-Z0-9_\u4e00-\u9fa5]{1,16}$/;e.length>16?i(new Error("长度不能超过16个字符")):s.test(e)?i():i(new Error("仅支持大小写英文、中文和下划线_"))},o=function(t,e,i){e.length<6?i(new Error("密码长度不得小于6位")):i()},n=function(t,e,i){var s=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;s.test(e)?i():i(new Error("手机号格式错误"))}},"30fa":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{title:"身份验证",fullscreen:"","footer-hide":""},model:{value:t.passCheckVisible,callback:function(e){t.passCheckVisible=e},expression:"passCheckVisible"}},[i("div",{staticClass:"pass-check",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkPass.apply(null,arguments)}}},[i("Icon",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"md-lock",size:"30"}}),i("div",{staticClass:"title",staticStyle:{"margin-bottom":"40px"}},[t._v("密码认证")]),i("div",{staticClass:"desc"},[t._v("请输入您的密码")]),i("Input",{staticStyle:{width:"300px","margin-bottom":"40px"},attrs:{autofocus:"",password:"",size:"large",placeholder:"请输入您的密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("div",{staticStyle:{"margin-bottom":"60px"}},[i("Button",{staticStyle:{"margin-right":"20px"},attrs:{size:"large"},on:{click:function(e){t.passCheckVisible=!1}}},[t._v("取消")]),i("Button",{attrs:{loading:t.loading,disabled:!t.password,type:"primary",size:"large"},on:{click:t.checkPass}},[t._v("提交")])],1)],1)])],1)},o=[],n=i("365c"),a={name:"circleLoading",data:function(){return{loading:!1,passCheckVisible:!1,password:""}},methods:{checkPass:function(){var t=this;this.loading=!0,Object(n["qc"])({password:this.password}).then((function(e){t.loading=!1,e.success&&(t.passCheckVisible=!1,t.$emit("on-success",!0))}))},show:function(){this.password="",this.passCheckVisible=!0}}},l=a,c=(i("e8ee"),i("2877")),r=Object(c["a"])(l,s,o,!1,null,null,null);e["default"]=r.exports},"585f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("账户密码")]),t.form.passStrength?i("div",{staticClass:"desc"},[t._v(" 当前密码强度： "),"弱"==t.form.passStrength?i("span",{staticClass:"red"},[t._v(t._s(t.form.passStrength))]):t._e(),"中"==t.form.passStrength?i("span",{staticClass:"middle"},[t._v(t._s(t.form.passStrength))]):t._e(),"强"==t.form.passStrength?i("span",{staticClass:"green"},[t._v(t._s(t.form.passStrength))]):t._e()]):t._e()]),i("div",[i("a",{on:{click:function(e){t.showChangePass=!0}}},[t._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("绑定手机")]),i("div",{staticClass:"desc"},[t.form.mobile?i("span",[t._v("已绑定手机："+t._s(t.form.mobile))]):i("span",[t._v("未绑定手机号")])])]),i("div",[i("a",{on:{click:t.showChangeMobile}},[t._v("修改")])])]),i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("绑定邮箱")]),i("div",{staticClass:"desc"},[t.form.email?i("span",[t._v("已绑定邮箱："+t._s(t.form.email))]):i("span",[t._v("未绑定邮箱")])])]),i("div",[i("a",{on:{click:t.showChangeEmail}},[t._v("修改")])])]),t._m(0),i("Modal",{attrs:{title:"修改手机号",closable:!1,"mask-closable":!1,width:500},model:{value:t.editMobileVisible,callback:function(e){t.editMobileVisible=e},expression:"editMobileVisible"}},[i("Form",{ref:"mobileEditForm",attrs:{model:t.mobileEditForm,"label-width":70,rules:t.mobileEditValidate}},[i("FormItem",{attrs:{label:"手机号",prop:"mobile"}},[i("Input",{attrs:{placeholder:"请输入新手机号"},on:{"on-change":t.hasChangePhone},model:{value:t.mobileEditForm.mobile,callback:function(e){t.$set(t.mobileEditForm,"mobile",e)},expression:"mobileEditForm.mobile"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:t.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入您收到的短信验证码"},model:{value:t.mobileEditForm.code,callback:function(e){t.$set(t.mobileEditForm,"code",e)},expression:"mobileEditForm.code"}}),i("CountDownButton",{ref:"countDownMobile",attrs:{disabled:t.canSendMobileCode,autoCountDown:!1,loading:t.sending,text:t.getSms},on:{"on-click":t.sendEditMobileCode}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelInputCodeBox}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.checkCodeLoading},on:{click:t.submitEditMobile}},[t._v("提交")])],1)],1),i("Modal",{attrs:{title:"修改邮箱",closable:!1,"mask-closable":!1,width:500},model:{value:t.editEmailVisible,callback:function(e){t.editEmailVisible=e},expression:"editEmailVisible"}},[i("Form",{ref:"emailEditForm",attrs:{model:t.emailEditForm,"label-width":100,rules:t.emailEditValidate}},[i("FormItem",{attrs:{label:"新邮箱地址",prop:"email"}},[i("Input",{attrs:{placeholder:"请输入新邮箱地址"},on:{"on-change":t.hasChangeEmail},model:{value:t.emailEditForm.email,callback:function(e){t.$set(t.emailEditForm,"email",e)},expression:"emailEditForm.email"}})],1),i("FormItem",{attrs:{label:"验证码",prop:"code",error:t.codeError}},[i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入您收到的邮件中的验证码"},model:{value:t.emailEditForm.code,callback:function(e){t.$set(t.emailEditForm,"code",e)},expression:"emailEditForm.code"}}),i("CountDownButton",{ref:"countDownEmail",attrs:{disabled:t.canSendEditEmail,autoCountDown:!1,loading:t.sending,text:t.getSms},on:{"on-click":t.sendVerifyEmail}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelEditEmail}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.editEmailLoading},on:{click:t.submitEditEmail}},[t._v("提交")])],1)],1),i("changePass",{model:{value:t.showChangePass,callback:function(e){t.showChangePass=e},expression:"showChangePass"}}),i("check-password",{ref:"checkPassMobile",on:{"on-success":t.checkSuccessMobile}}),i("check-password",{ref:"checkPassEmail",on:{"on-success":t.checkSuccessEmail}})],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("div",[i("div",{staticClass:"title"},[t._v("密保问题")]),i("div",{staticClass:"desc"},[t._v("未设置密保问题，密保问题可有效保护账户安全")])]),i("div",[i("a",[t._v("暂不支持设置")])])])}],n=i("365c"),a=i("10fd"),l=i("60e8"),c=i("30fa"),r=i("fdd1"),d=i("be65"),m=i.n(d),u={components:{changePass:r["default"],checkPassword:c["default"],CountDownButton:l["default"]},name:"security",data:function(){return{showChangePass:!1,form:{},mobileEditForm:{mobile:"",code:""},emailEditForm:{email:"",code:""},codeError:"",initPhone:"",initEmail:"",saveLoading:!1,sending:!1,getSms:"获取验证码",canSendMobileCode:!0,checkCodeLoading:!1,checkPassLoading:!1,editEmailLoading:!1,mobileEditValidate:{mobile:[{required:!0,message:"请输入手机号码"},{validator:a["a"]}]},emailEditValidate:{email:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"邮箱格式不正确"}]},editMobileVisible:!1,editEmailVisible:!1,canSendEditEmail:!0}},methods:{init:function(){var t=JSON.parse(m.a.get("userInfo"));for(var e in t)null==t[e]&&(t[e]="");var i=JSON.stringify(t),s=JSON.parse(i);this.form=s,this.initPhone=s.mobile,this.mobileEditForm.mobile=s.mobile,this.initEmail=s.email,this.emailEditForm.email=s.email},showChangeMobile:function(){this.$refs.checkPassMobile.show()},checkSuccessMobile:function(){this.editMobileVisible=!0},showChangeEmail:function(){this.$refs.checkPassEmail.show()},checkSuccessEmail:function(){this.editEmailVisible=!0},cancelInputCodeBox:function(){this.editMobileVisible=!1,this.form.mobile=this.initPhone},cancelEditEmail:function(){this.editEmailVisible=!1,this.emailEditForm.email=this.initEmail},sendEditMobileCode:function(){var t=this;this.$refs["mobileEditForm"].validate((function(e){e&&(t.getSms="发送中",t.sending=!0,Object(n["ic"])(t.mobileEditForm.mobile).then((function(e){t.getSms="获取验证码",t.sending=!1,e.success&&(t.$Message.success("发送短信验证码成功"),t.$refs.countDownMobile.startCountDown())})))}))},submitEditMobile:function(){var t=this;this.$refs["mobileEditForm"].validate((function(e){if(e){if(!t.mobileEditForm.code)return void(t.codeError="请填写短信验证码");t.codeError="",t.checkCodeLoading=!0,Object(n["k"])(t.mobileEditForm).then((function(e){t.checkCodeLoading=!1,e.success&&(t.$Message.success("修改成功"),t.form.mobile=t.mobileEditForm.mobile,t.initPhone=t.mobileEditForm.mobile,t.editMobileVisible=!1,t.$emit("on-success",!0))}))}}))},hasChangePhone:function(){var t=this;this.mobileEditForm.mobile==this.initPhone?this.canSendMobileCode=!0:this.$refs["mobileEditForm"].validate((function(e){t.canSendMobileCode=!e}))},hasChangeEmail:function(){this.emailEditForm.email==this.initEmail?this.canSendEditEmail=!0:this.canSendEditEmail=!1},sendVerifyEmail:function(){var t=this;this.$refs["emailEditForm"].validate((function(e){e&&(t.getSms="发送中",t.sending=!0,Object(n["hc"])(t.emailEditForm.email).then((function(e){t.getSms="获取验证码",t.sending=!1,e.success&&(t.$Message.success("发送邮件验证码成功，请注意查收"),t.$refs.countDownEmail.startCountDown())})))}))},submitEditEmail:function(){var t=this;this.$refs["emailEditForm"].validate((function(e){if(e){if(!t.emailEditForm.code)return void(t.codeError="验证码不能为空");t.codeError="",t.editEmailLoading=!0,Object(n["K"])(t.emailEditForm).then((function(e){t.editEmailLoading=!1,e.success&&(t.initEmail=t.emailEditForm.email,t.form.email=t.emailEditForm.email,t.$Message.success("修改邮件成功"),t.editEmailVisible=!1,t.$emit("on-success",!0))}))}}))}},mounted:function(){this.init()}},h=u,f=i("2877"),b=Object(f["a"])(h,s,o,!1,null,null,null);e["default"]=b.exports},"60e8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Button",{attrs:{countTime:t.countTime,loading:t.loading,type:t.type,size:t.size,ghost:t.ghost,disabled:t.disabled||t.clicked,icon:t.icon,shape:t.shape,long:t.long},on:{click:t.handleClick}},[t._v(t._s(t.buttonText))])],1)},o=[],n={name:"iconChoose",props:{text:{type:String,default:"提交"},autoCountDown:{type:Boolean,default:!0},countTime:{type:[Number,String],default:60},suffixText:{type:String,default:"秒后重试"},type:String,size:String,loading:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:String,shape:String,long:{type:Boolean,default:!1}},data:function(){return{buttonText:this.text,count:Number(this.countTime),clicked:!1}},methods:{init:function(){},handleClick:function(){this.autoCountDown&&(this.clicked=!0,this.countDown()),this.$emit("on-click",!0)},startCountDown:function(){this.clicked=!0,this.countDown()},countDown:function(){var t=this;if(0==this.count)return this.clicked=!1,this.count=this.countTime,void(this.buttonText=this.text);this.buttonText=this.count+" "+this.suffixText,this.count--,setTimeout((function(){t.countDown()}),1e3)},setText:function(t){t!==this.buttonText&&(this.buttonText=t)}},watch:{text:function(t){this.setText(t)}},mounted:function(){this.init()}},a=n,l=i("2877"),c=Object(l["a"])(a,s,o,!1,null,null,null);e["default"]=c.exports},e8ee:function(t,e,i){"use strict";i("0195")}}]);